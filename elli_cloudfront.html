<html><head><meta charset="UTF-8"><link type="text/css" href="css/default.css" rel="stylesheet"><link type="text/css" href="css/hk-pyg.css" rel="stylesheet"><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><title>elli_cloudfront documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/quasiquoting/lodox">Lodox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">elli_cloudfront</span> <span class="project-version">0.0.2</span></span> <span class="project-documented">(75% documented)</span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Application</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Modules</span></h3><ul><li class="depth-1"><a href="ecf_datetime.html"><div class="inner">ecf_datetime</div></a></li><li class="depth-1 current"><a href="elli_cloudfront.html"><div class="inner">elli_cloudfront</div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Exports</span></a></h3><ul><li class="depth-1"><a href="elli_cloudfront.html#func-cookie_data.2F3"><div class="inner"><span>cookie_data/3</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-get_ticket_path.2F1"><div class="inner"><span>get_ticket_path/1</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-handle.2F2"><div class="inner"><span>handle/2</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-handle_event.2F3"><div class="inner"><span>handle_event/3</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-key_pair_id.2F1"><div class="inner"><span>key_pair_id/1</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-new_token.2F0"><div class="inner"><span>new_token/0</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-new_token.2F1"><div class="inner"><span>new_token/1</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-opts.2F0"><div class="inner"><span>opts/0</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-private_key.2F1"><div class="inner"><span>private_key/1</span></div></a></li><li class="depth-1"><a href="elli_cloudfront.html#func-set_cookies_path.2F1"><div class="inner"><span>set_cookies_path/1</span></div></a></li></ul></div><div id="content" class="module-docs"><h1 id="top" class="anchor">elli_cloudfront</h1><h4 class="behaviour">elli_handler</h4><div class="doc"><p>CloudFront cookie signing handler.</p>
</div><div class="public anchor" id="func-cookie_data.2F3"><h3>cookie_data/3</h3><div class="usage"><div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(resource expiry args)</code></pre></div>
</div><div class="doc"><p>Given a <code>resource</code> URL, <code>expiry</code> and proplist of <code>args</code>.<br />
return a proplist of CloudFront cookies.</p>
<p>If <code>expiry</code> is invalid input to <a href="ecf_datetime.html#func-from_now.2F1">ecf_datetime:from_now/1</a>, or<br />
one of <code>'key_pair_id</code> or <code>'private_key</code><br />
is missing from <code>args</code>, throw an error.</p>
<p>See also: <a href="elli_cloudfront.html#func-key_pair_id.2F1">key_pair_id/1</a> and <a href="elli_cloudfront.html#func-private_key.2F1">private_key/1</a></p>
</div></div><div class="public anchor" id="func-get_ticket_path.2F1"><h3>get_ticket_path/1</h3><div class="usage"><div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(args)</code></pre></div>
</div><div class="doc"><p>Given a property list of <code>args</code>, return the value of <code>'get_ticket_path</code>.</p>
<p>Default: <code>'[#&quot;auth&quot; #&quot;get_ticket&quot;]</code></p>
</div></div><div class="public anchor" id="func-handle.2F2"><h3>handle/2</h3><div class="usage"><div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">((<span class="kw">=</span> (match-req <span class="kw">method</span> <span class="kw">method</span> path path) req) args)
(req _args)</code></pre></div>
</div><div class="doc"></div></div><div class="public anchor" id="func-handle_event.2F3"><h3>handle_event/3</h3><div class="usage"><div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(&#39;elli_startup args config)
(_event _args _config)</code></pre></div>
</div><div class="doc"></div></div><div class="public anchor" id="func-key_pair_id.2F1"><h3>key_pair_id/1</h3><div class="usage"><div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(args)</code></pre></div>
</div><div class="doc"><p>Given a proplist of <code>args</code>, return the <code>'key_pair_id</code>.</p>
<p>If it is missing, throw <code>#(error #(missing key_pair_id))</code>.</p>
</div></div><div class="public anchor" id="func-new_token.2F0"><h3>new_token/0</h3><div class="doc"><p>Equivalent to <code>(funcall #'</code><a href="elli_cloudfront.html#func-new_token.2F1">new_token/1</a> <code>40)</code>.</p>
</div></div><div class="public anchor" id="func-new_token.2F1"><h3>new_token/1</h3><div class="usage"><div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(n)</code></pre></div>
</div><div class="doc"><p>Generate <code>n</code> bytes randomly uniform <code>0..255</code>, and return the result<br />
URL-safe base64 encoded, i.e. with <code>+=/</code> replaced with <code>-_~</code>, respectively.</p>
</div></div><div class="public anchor" id="func-opts.2F0"><h3>opts/0</h3><div class="doc"></div></div><div class="public anchor" id="func-private_key.2F1"><h3>private_key/1</h3><div class="usage"><div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(args)</code></pre></div>
</div><div class="doc"><p>Given a proplist of <code>args</code>, return the <code>'private_key</code>.</p>
<p>If it is missing, throw <code>#(error #(missing private_key))</code>.</p>
</div></div><div class="public anchor" id="func-set_cookies_path.2F1"><h3>set_cookies_path/1</h3><div class="usage"><div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(args)</code></pre></div>
</div><div class="doc"></div></div></div></body></html>